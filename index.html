<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Schedule</title>
</head>

<style>

    body {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 20px;
        position: relative;
    }

    h1 {
        font-family: Futura, sans-serif;
    }

    h2 {
        font-family: Futura, sans-serif;
    }

    .container {
        width: 1200px;
        height: 600px;
    }

    .schedule-container {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: row;
    }

    .day-column {
        width: 14.25%;
        height: 100%;
        border: 1px solid rgb(145, 145, 145);
        border-radius: 5px;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        gap: 10px;
        align-items: center;
    }

    .day-name {
        width: 100%;
        width: 100%;
        height: 60px;
        background-color: #86BF8F;
        font-weight: bold;
        font-family: 'Futura', sans-serif;
        text-align: center;
        font-size: 1.5em;
        justify-content: center;
        align-items: center;
        display: flex;
        flex-direction: column;
    }

    .lesson-container {
        box-sizing: border-box;
        width: 96%;
        background-color: #8772AF;
        border-radius: 5px;
        padding: 10px;
        display: flex;
        flex-direction: column;
        gap: 5px;
        justify-content: center;
        align-items: center;
        text-align: center;     
        box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.5);
    }

    .lesson-title {
        font-weight: bold;
        font-family: 'Futura', sans-serif;
        color: #fff;
    }

    .lesson-time {
        background-color: #DE9E36;
        border-radius: 5px;
        padding: 5px;
        box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.5);
        font-family: 'Futura', sans-serif;
        font-size: 0.8em;
    }

    .lesson-level-age-container {
        display: flex;
        flex-direction: row;
        gap: 5px;
    }


    .lesson-level {
        background-color: #272727;
        border-radius: 5px;
        padding: 5px;
        box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.5);
        color: #fff;
        font-family: 'Futura', sans-serif;
    }

    .lesson-age {
        background-color: #00A7E1;
        border-radius: 5px;
        padding: 5px;
        box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.5);
        color: #fff;
        font-family: 'Futura', sans-serif;
    }
    
    .button {
        margin-top: 20px;
        height: 40px; /* Set a fixed height */
        padding: 0 20px; /* Adjust horizontal padding */
        font-family: 'Futura', sans-serif;
        font-size: 1.2em;
        background-color: #86BF8F;
        border: none;
        border-radius: 20px; /* Half of the height */
        cursor: pointer;
        display: flex; /* Add this */
        align-items: center; /* Add this */
        justify-content: center; /* Add this */
        box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.5);
    }

    .red {
        background-color: #f37878;
    }

    .form-container {
        display: flex;
        flex-direction: column;
        gap: 10px;
        align-items: center;
        justify-content: center;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        padding: 50px;
        background-color: #fff;
        border-radius: 10px;
        border: 5px solid #8772AF;
    }

    
    .form-container select {
        width: 100%;
        height: 40px;
        border: 1px solid #8772AF;
        border-radius: 20px;
        padding: 0 20px;
        font-family: 'Futura', sans-serif;
        background-color: #fff;
        appearance: none;
        -webkit-appearance: none;
        -moz-appearance: none;
        background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%238772AF%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E");
        background-repeat: no-repeat;
        background-position: right 15px top 50%;
        background-size: 12px auto;
    }

    .form-container select::-ms-expand {
        display: none;
    }

    .form-container input {
        width: 100%;
        height: 40px;
        border: 1px solid #8772AF;
        border-radius: 20px;
        padding: 0 20px;
        font-family: 'Futura', sans-serif;
    }

    .share-container {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        gap: 10px;
    }
</style>

<body>

    <h1>Schedule Maker</h1>

    <button class="button" id="add-event">&#x2795; Add event</button>

    <div class="container">
        <div class="schedule-container">
            <div class="day-column" id="column-mon">
                <div class="day-name">Mon</div>
            </div>
            <div class="day-column" id="column-tue">
                <div class="day-name">Tue</div>
            </div>
            <div class="day-column" id="column-wed">
                <div class="day-name">Wed</div>
            </div>
            <div class="day-column" id="column-thu">
                <div class="day-name">Thu</div>
            </div>
            <div class="day-column" id="column-fri">
                <div class="day-name">Fri</div>
            </div>
            <div class="day-column" id="column-sat">
                <div class="day-name">Sat</div>
            </div>
            <div class="day-column" id="column-sun">
                <div class="day-name">Sun</div>
            </div>
        </div>
    </div>
    
    <h2>Share schedule:</h2>
    <div class="share-container">
        <button class="button" id="share-button">&#x1F517; Copy Link</button>
        <button class="button" id="create-iframe">&#x1F5BC; Create iframe</button>
    </div>

    <script>
        let lessons = [
            {
                Title: "Example Title",
                day: "Mon",
                time: "10:00-12:00",
                black_label: "Label 1",
                blue_label: "Tag 1",
                link: "https://example.com",
                color: "#8772AF"
            },
            {
                Title: "Another Title",
                day: "Mon",
                time: "12:00-13:00",
                black_label: "Label 2",
                blue_label: "Tag 2",
                link: "https://example.com",
                color: "#8772AF"
            }
        ];


        window.onload = function() {
            updateSchedule();
        }

        // Update schedule
        function updateSchedule() {
            const days = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"];

            // Going through columns for each day
            for (const day of days) {
                const column = document.getElementById(`column-${day.toLowerCase()}`);
                if (!column) {
                    console.error(`Column not found for day: ${day}`);
                    continue;
                }

                // Keep the day name, remove other children
                while (column.children.length > 1) {
                    column.removeChild(column.lastChild);
                }

                for (const lesson of lessons) {
                    if (lesson.day === day) {
                        const lessonContainer = document.createElement("div");
                        lessonContainer.classList.add("lesson-container");
                        lessonContainer.style.backgroundColor = lesson.color;
                        lessonContainer.innerHTML = `
                            <div class="lesson-title">${lesson.Title}</div>
                            <div class="lesson-time">&#x1F550 ${lesson.time}</div>
                            <div class="lesson-level-age-container">
                                <div class="lesson-level">${lesson.black_label}</div>
                                <div class="lesson-age">${lesson.blue_label}</div>
                            </div>
                        `;
                        column.appendChild(lessonContainer);

                        lessonContainer.addEventListener('click', function() {
                            const deleteContainer = document.createElement('div');
                            deleteContainer.classList.add('form-container');
                            deleteContainer.innerHTML = `
                                <button class="button red" id="delete-event">Delete</button>
                                <button class="button" id="keep-event">Keep</button>
                            `;
                            document.body.appendChild(deleteContainer);
                            
                            document.getElementById('delete-event').addEventListener('click', function() {
                                document.body.removeChild(deleteContainer);
                                // Remove the lesson from the lessons array
                                for (let i = 0; i < lessons.length; i++) {
                                    if (lessons[i].Title === lesson.Title) {
                                        lessons.splice(i, 1);
                                        break;
                                    }
                                }
                                updateSchedule();
                            });

                            document.getElementById('keep-event').addEventListener('click', function() {
                                document.body.removeChild(deleteContainer);
                            });

                            document.getElementById('keep-event').addEventListener('click', function() {
                                document.body.removeChild(deleteContainer);
                            });
                        });
                    }
                }
            }
        }


        function generateSharableLink() {
            const encodedLessons = encodeURIComponent(JSON.stringify(lessons));
            const shareableUrl = `${window.location.origin}/shared-schedule.html?data=${encodedLessons}`;
            return shareableUrl;
        }

        // Add event button
        //creating a form
        document.getElementById('add-event').addEventListener('click', function() {
            const formContainer = document.createElement('div');
            formContainer.classList.add('form-container');
            formContainer.innerHTML = `
                <select id="day-select">
                    <option value="Mon">Monday</option>
                    <option value="Tue">Tuesday</option>
                    <option value="Wed">Wednesday</option>
                    <option value="Thu">Thursday</option>
                    <option value="Fri">Friday</option>
                    <option value="Sat">Saturday</option>
                    <option value="Sun">Sunday</option>
                </select>
                <input type="text" placeholder="Title" id="title-input">
                <input type="text" placeholder="Time(e.g. 10:00-12:00)" id="time-input">
                <input type="text" placeholder="Black Label" id="black-label-input">
                <input type="text" placeholder="Blue Label" id="blue-label-input">
                <input type="text" placeholder="Link(optional)" id="link-input">
                <input type="color" id="color-input" value="#8772AF">
                <button class="button" id="add-event-confirm">&#x2795; Add event</button>
                <button class="button red" id="cancel-event">&#x2796; Cancel</button>
            `;

            document.body.appendChild(formContainer);
            
            //adding a new event from data from the form
            document.getElementById('add-event-confirm').addEventListener('click', function() {
                const title = document.getElementById('title-input').value;
                const day = document.getElementById('day-select').value;
                const time = document.getElementById('time-input').value;
                const blackLabel = document.getElementById('black-label-input').value;
                const blueLabel = document.getElementById('blue-label-input').value;
                const link = document.getElementById('link-input').value;
                const color = document.getElementById('color-input').value;
                lessons.push({
                    Title: title,
                    day: day,
                    time: time,
                    black_label: blackLabel,
                    blue_label: blueLabel,
                    link: link,
                    color: color
                });

                //closing the form
                document.body.removeChild(formContainer);

                // Update the schedule
                updateSchedule();
            
            });

            //closing the form
            document.getElementById('cancel-event').addEventListener('click', function() {
                document.body.removeChild(formContainer);
            });
        })

            


        document.getElementById('share-button').addEventListener('click', function() {
            const shareableUrl = generateSharableLink();
            
            // Create a temporary input to copy the URL
            const tempInput = document.createElement('input');
            tempInput.value = shareableUrl;
            document.body.appendChild(tempInput);
            tempInput.select();
            document.execCommand('copy');
            document.body.removeChild(tempInput);

            alert('Shareable link copied to clipboard!');
        });


        document.getElementById('create-iframe').addEventListener('click', function() {
            const shareableUrl = generateSharableLink();
            const tempInput = document.createElement('input');
            tempInput.value = `<iframe src="${shareableUrl}" width="100%" height="100%"></iframe>`;
            document.body.appendChild(tempInput);
            tempInput.select();
            document.execCommand('copy');
            document.body.removeChild(tempInput);

            alert('Iframe code copied to clipboard!');
        });
    </script>

</body>

</html>
